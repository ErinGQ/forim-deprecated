<div id='sidebar'>

  <div class='panel'>
    <% if (typeof(user) !== 'undefined' || current_user) { %>
    <div class='header'>
      <span class='col_fade'>个人信息</span>
    </div>
    <div class='inner'>
      <%- partial('user/profile',{ object: typeof(user) === 'undefined' ? current_user : user, as: 'user' }) %>
    </div>
    <% } else { %>
    <div class='inner'>
      <p><%= config.description %></p>

      <div>
        您可以
        <a href='/user/login'>登录</a>
        或
        <a href='/user/register'>注册</a>
        , 也可以
        <a href="/auth/github">
          <span class="span-info">
            通过 GitHub 登录
          </span>
        </a>
      </div>
    </div>
    <% } %>
  </div>

  <% if (current_user) { %>
  <div class="panel">
    <div class='inner'>
      <a href='/thread/create' id='create_topic_btn'>
        <span class='span-success'>发布话题</span>
      </a>
    </div>
  </div>
  <% } %>
  <div class='panel'>
    <div class='header'>
      <span class='col_fade'>无人回复的话题</span>
    </div>
    <div class='inner'>
        <% if (typeof(unanswered) !== 'undefined') { %>

      <% if (unanswered.length > 0) { %>
      <ul class="unstyled">
        <%- partial('thread/small', { collection: unanswered, as: 'thread' }) %>
      </ul>
      <% } else { %>
      <p>无</p>
      <% } %>
        <% } %>

    </div>
  </div>

  <div class='panel'>
    <div class='header'>
      <span class='col_fade'>积分榜</span>
      &nbsp;
      <a class='dark' href='/user/top'>TOP 100 &gt;&gt;</a>
    </div>
    <div class='inner'>
      <% if (typeof(highestScores) !== 'undefined') { %>

      <% if (highestScores.length > 0) { %>
      <ol>
        <%- partial('user/top', { collection: highestScores, as: 'user' }) %>
      </ol>
      <% } else { %>
      <p>无</p>
      <% } %>
        <% } %>

    </div>
  </div>
</div>
